(()=>{"use strict";var e=function(e){return function(t){return 1-e(1-t)}},t=function(e){return Math.pow(e,2)},n=function(e){var t=e.duration,n=e.draw,r=e.timing,a=performance.now(),i=requestAnimationFrame((function e(o){var s=(o-a)/t,c=r(s>1?1:s),l=n.call(null,c);if(s<1&&!l)return requestAnimationFrame(e);cancelAnimationFrame(i)}))};function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const i=function(){function e(t){var n,a=t.selector,i=t.pattern,o=void 0===i?{}:i,s=t.method,c=t.message;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=document.querySelector(a),this.pattern=o,this.method=s,this.message=c,this.elementsForm=(n=this.form.elements,function(e){if(Array.isArray(e))return r(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(e){return"input"===e.tagName.toLowerCase()&&"button"!==e.typy})),this.error=new Set}var t,n;return t=e,(n=[{key:"init",value:function(e){var t=this;!e&&this.applyStyle(),this.setPattern(),this.form.addEventListener("submit",(function(){t.elementsForm.forEach((function(e){return t.checkIt({target:e})})),t.error.size?t.form.classList.add("invalid"):t.form.classList.remove("invalid")})),this.elementsForm.forEach((function(e){var n=e.parentElement.appendChild(document.createElement("div"));n.classList.add("wrap"),n.append(e),e.removeAttribute("required"),e.addEventListener("input",t.checkIt.bind(t)),e.addEventListener("blur",t.checkIt.bind(t))}))}},{key:"checkIt",value:function(e){var t=e.target;this.isValid(t)?this.showSuccess(t):this.showError(t)}},{key:"isValid",value:function(e){var t=this,n={notEmpty:function(e){return""!==e.trim()},pattern:function(e,t){return t.test(e)}},r=e.name.replace(/^(user_)/,""),a=this.method?this.method[r]:[];return!a||a.every((function(r){return n[r[0]](e.value,t.pattern[r[1]])}))}},{key:"showError",value:function(e){if(this.error.add(e),e.classList.remove("success"),e.classList.add("error"),!e.nextElementSibling||!e.nextElementSibling.classList.contains("error-message")){var t=document.createElement("div"),n=e.name.replace(/^(user_)/,"");t.textContent=this.message[n]||"Ошибка в этом поле...",t.classList.add("error-message"),e.insertAdjacentElement("afterend",t)}}},{key:"showSuccess",value:function(e){this.error.delete(e),e.classList.remove("error"),e.classList.add("success"),e.nextElementSibling&&e.nextElementSibling.classList.contains("error-message")&&e.nextElementSibling.remove()}},{key:"applyStyle",value:function(){var e=document.createElement("style");e.textContent="\n      input.success {\n        border: 2px solid green !important;\n      }\n      input.error {\n        color: red !important;\n        border: 2px solid red !important;\n      }\n      .wrap {\n        position: relative;\n        margin: 0;\n      }\n      .error-message {\n        position: absolute;\n        right: 10px;\n        font-size: 12px;\n        font-family: sans-serif;\n        color: red;\n        bottom: 0;\n        left: 50%;\n        height: 18px;\n        background-color: #ffffff;\n        border-radius: 10px;\n        padding: 0px 5px;\n        width: 150px;\n        transform: translate(-75px, 3px);\n        border: 1px solid;\n      }\n    ",document.head.append(e)}},{key:"setPattern",value:function(){this.pattern.phone=this.pattern.phone||/^\+?[78](([-()]*\d){10})$/,this.pattern.email=this.pattern.email||/^[\w\d"-_.!~*']*@[\w\d"-_.!~*']*\.\w{2,}$/,this.pattern.name=this.pattern.name||/^([А-ЯЁ]([а-яё]+)?)([\s][А-ЯЁ]([а-яё]+)?)*([\s][А-ЯЁ]([а-яё]+)?)?$/,this.pattern.message=this.pattern.message||/^([\dа-яё]+)(([?!.,])?(\s-)?([\s][\dа-яё]+))*([\s][\dа-яё]+)?([!?.]{0,3})?$/i}}])&&a(t.prototype,n),e}();var o="<style>\n        svg {\n          width: 100%;\n          height: 100%;\n        }\n\n        path {\n          stroke-dasharray: 99.47578430175781;\n          stroke-dashoffset: -99.47578430175781;\n          fill: transparent;\n        }\n\n        svg.animate path {\n          animation: 1.7s ease forwards draw;\n          opacity: 1;\n        }\n\n        @keyframes draw {\n          0% {\n            opacity: 1;\n            stroke-dashoffset: -99.47578430175781;\n            fill: transparent;\n            transform: translateY(0);\n          }\n\n          50% {\n            stroke-dashoffset: 0;\n            fill: transparent;\n          }\n\n          100% {\n            fill: ",s="".concat(o+"#bd313e;\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n      </style>",'\n\n      <svg class="animate" viewbox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n        <path\n          d="m6.5 22.8l2.7 2.7 6.8-6.8 6.8 6.8 2.7-2.7-6.8-6.8 6.8-6.8-2.7-2.7-6.8 6.8-6.8-6.8-2.7 2.7 6.8 6.8-6.8 6.8z"\n          stroke="#bd313e"\n          fill="transparent"\n        />\n      </svg>'),c="".concat(o+"#3da35a;\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n      </style>",'\n      <svg class="animate" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\n        <path\n          d="M 18 32.34 l -8.34 -8.34 -2.83 2.83 11.17 11.17 24 -24 -2.83 -2.83 z"\n          d="M12.696 11.282l26.022 26.02-1.414 1.415-26.022-26.02z"\n          d="M37.304 11.282l1.414 1.414-26.022 26.02-1.414-1.413z"\n          stroke="#3da35a"\n          fill="transparent"\n        />\n      </svg>');function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d,m,f,p,v,h,g,y,b,k,w,E,L,S,x,A,C,q,_,I,M,T;C="10 oct 2021",q=0,_=document.querySelector("#timer-hours"),I=document.querySelector("#timer-minutes"),M=document.querySelector("#timer-seconds"),(T=function(){var e=function(){var e=(new Date(C).getTime()-(new Date).getTime())/1e3,t=e<0?0:Math.floor(e)%60,n=e<0?0:Math.floor(e/60)%60,r=e<0?0:Math.floor(e/60/60);return e<0&&clearInterval(q),{hours:r,minutes:n,seconds:t}}(),t=e.hours,n=e.minutes,r=e.seconds;_.textContent=t<10?"0"+t:t,I.textContent=("0"+n).slice(-2),M.textContent=("0"+r).slice(-2)})(),q=setInterval(T,1e3),A=document.querySelector("menu"),document.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")?A.classList.add("active-menu"):(!t.closest("menu")||t.classList.contains("close-btn")||t.closest("menu>ul>li>a"))&&(A.classList.remove("active-menu"),(t.closest("menu>ul>li>a")||t.closest("main>a")||t.closest('a[href="#"]')&&!t.classList.contains("portfolio-btn"))&&function(e){var t="A"===e.target.tagName?e.target:e.target.closest("a");if(t){var n=t.getAttribute("href"),r="#"!==n?document.querySelector(n).getBoundingClientRect():0;e.preventDefault(),scrollTo({top:r?r.top+window.pageYOffset:0,behavior:"smooth"})}}(e))})),x=document.querySelector(".popup"),document.querySelectorAll(".popup-btn").forEach((function(e){e.addEventListener("click",(function(){var e,t;x.style.display="block",screen.width<768||(e=20,t=0,function n(){var r=requestAnimationFrame(n);if(t!==e)return x.firstElementChild.style.transform="translateX(-50px) scale(".concat(t/e,")"),x.firstElementChild.style.opacity=1/e*t,t++,r;cancelAnimationFrame(r),t=0,x.firstElementChild.style.transform="",x.firstElementChild.style.opacity=""}())}))})),x.addEventListener("click",(function(e){var t=e.target;(t.classList.contains("popup-close")||!t.closest(".popup-content"))&&(x.style.display="none")})),E=document.querySelector(".service-header"),L=document.querySelectorAll(".service-header-tab"),S=document.querySelectorAll(".service-tab"),E.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&L.forEach((function(e,n){return e===t?function(e){L[e].classList.add("active"),S[e].classList.remove("d-none")}(n):function(e){L[e].classList.remove("active"),S[e].classList.add("d-none")}(n)}))})),p=0,v=document.querySelector(".portfolio-content"),h=v.querySelectorAll(".portfolio-item"),g=function(e,t){var n=e.appendChild(document.createElement("ul"));return n.classList.add("portfolio-dots"),t.forEach((function(e,t){return n.innerHTML+='<li class="dot'.concat(t?"":" dot-active",'" id="dot').concat(t,'""></li>')})),n.querySelectorAll(".dot")}(v,h),y=function(e,t,n){e[t].classList.remove(n)},b=function(e,t,n){e[t].classList.add(n)},k=function(){y(h,p,"portfolio-item-active"),y(g,p,"dot-active"),p=p<h.length-1?++p:0,b(h,p,"portfolio-item-active"),b(g,p,"dot-active")},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;f=setInterval(k,e)},v.addEventListener("click",(function(e){var t=e.target;t.matches(".portfolio-btn, .dot")&&(e.preventDefault(),y(h,p,"portfolio-item-active"),y(g,p,"dot-active"),t.matches("#arrow-right")&&(p=p<h.length-1?++p:0),t.matches("#arrow-left")&&(p=p>0?--p:h.length-1),t.matches(".dot")&&(p=+t.id.slice(3)),b(h,p,"portfolio-item-active"),b(g,p,"dot-active"))})),v.addEventListener("mouseover",(function(e){return e.target.matches(".portfolio-btn, .dot")?void clearInterval(f):null})),v.addEventListener("mouseout",(function(e){return e.target.matches(".portfolio-btn, .dot")?w(1500):null})),w(1500),d=document.getElementById("command"),m=function(e){var t,n=e.target;return n.matches(".command__photo")?(t=[n.src,n.dataset.img],n.dataset.img=t[0],n.src=t[1],t):null},d.addEventListener("mouseover",m),d.addEventListener("mouseout",m),document.addEventListener("input",(function(e){var t=e.target;t.matches('input[name="user_name"], input[name="user_email"], input[name="user_phone"], input[name="user_message"]')&&(t.matches('input[name="user_name"]')&&(t.value=t.value.replace(/[^а-яё\s]+/gi,"")),t.matches('input[name="user_message"]')&&(t.value=t.value.replace(/[^а-яё\d\s!?.,-]+/gi,"")),t.matches('input[name="user_email"]')&&(t.value=t.value.replace(/[^\w\d@"-_.!~*']+/gi,"")),t.matches('input[name="user_phone"]')&&(t.value=t.value.replace(/[^+\d()-]+/g,"")))})),document.addEventListener("change",(function(e){var t=e.target;t.matches('input[name="user_name"], input[name="user_email"], input[name="user_phone"], input[name="user_message"]')&&(t.value=t.value.replace(/([-()@_.!~*'])(?=[-()@_.!~*']*\1)/g,"").replace(/([\s])(?=[\s]*\1)/g,"").replace(/^([\s-]*)|([\s-]*)$/g,""),t.matches('input[name="user_name"]')&&(t.value=t.value.replace(/[^-\s]+/gi,(function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}))),t.matches('input[name="user_phone"]')&&(t.value=t.value.replace(/\+/g,"").replace(/^\+?[78]?/g,"+7")),t.matches('input[name="user_message"]')&&(t.value=t.value.replace(/\s[!.?]/g,(function(e){return e.trim()}))))}),!0),function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,a=document.querySelector(".calc-block"),i=a.querySelector(".calc-type"),o=a.querySelector(".calc-square"),s=a.querySelector(".calc-day"),c=a.querySelector(".calc-count"),l=document.getElementById("total"),u=function(e,t,n,r,a){return t&&n?Math.ceil(e*t*n*r*a):0},d=function(e,t,n){if(t===+e.textContent)return!0;e.textContent=Math[t>+e.textContent?"ceil":"floor"](+e.textContent+n*(t-e.textContent))},m=function(r,a){n({duration:2e3,timing:e(t),draw:d.bind(null,r,a)})};a.addEventListener("input",(function(e){var t=e.target;t.matches("input.calc-item")&&(t.value=t.value.replace(/\D/g,""));var n=i.options[i.selectedIndex].value,a=o.value,d=s.value&&s.value<5?2:s.value&&s.value<10?1.5:1,f=c.value>1?1+(c.value-1)/10:1;if(t.matches("select, input")){var p=u(r,n,a,f,d);p!==+l.textContent&&m(l,p)}}))}(100),document.querySelectorAll("form").forEach((function(e,t){new i({selector:"#".concat(e.id),pattern:{},method:{name:[["notEmpty"],["pattern","name"]],phone:[["notEmpty"],["pattern","phone"]],email:[["notEmpty"],["pattern","email"]],message:[["notEmpty"],["pattern","message"]]},message:{name:"Введите Имя.",phone:"Введите телефон.",email:"Введите email.",message:"Введите сообщение."}}).init(t)})),function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Загрузка...",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Спасибо! Мы скоро с вами свяжемся!",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Что-то пошло не так...",a=function(e,t,n){return setTimeout((function(){t.style="",t.textContent="",e.closest(".popup")&&(e.closest(".popup").style.display="none")}),n)},i=function(e){l(e.elements).forEach((function(e){e.value="",e.classList.remove("success")}))},o=function(t,r,o){if(200!==t.status)throw new Error("status network not 200");o.innerHTML=n,i(r),e=a(r,o,3e3)},s=function(t,n){n.innerHTML=r,e=a(t,n,3e3)},c=function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})};document.body.addEventListener("submit",(function(n){var r=n.target,a=r.appendChild(document.createElement("div"));if(n.preventDefault(),!r.classList.contains("invalid")){var i=new FormData(r),l={};i.forEach((function(e,t){return l[t]=e})),a.style.cssText=" \n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      height: 150px;\n    ",a.innerHTML=t,e&&clearTimeout(e),c(l).then((function(e){return o(e,r,a)})).catch((function(){return s(r,a)}))}}))}('<style>\n        .sk-circle-bounce {\n          width: 100px;\n          height: 100px;\n          position: relative;\n          margin: auto;\n        }\n        .sk-child {\n          width: 100%;\n          height: 100%;\n          position: absolute;\n          left: 0;\n          top: 0;\n        }\n        .sk-circle-bounce .sk-circle-2 {\n          transform: rotate(30deg);\n        }\n        .sk-circle-bounce .sk-circle-3 {\n          transform: rotate(60deg);\n        }\n        .sk-circle-bounce .sk-circle-4 {\n          transform: rotate(90deg);\n        }\n        .sk-circle-bounce .sk-circle-5 {\n          transform: rotate(120deg);\n        }\n        .sk-circle-bounce .sk-circle-6 {\n          transform: rotate(150deg);\n        }\n        .sk-circle-bounce .sk-circle-7 {\n          transform: rotate(180deg);\n        }\n        .sk-circle-bounce .sk-circle-8 {\n          transform: rotate(210deg);\n        }\n        .sk-circle-bounce .sk-circle-9 {\n          transform: rotate(240deg);\n        }\n        .sk-circle-bounce .sk-circle-10 {\n          transform: rotate(270deg);\n        }\n        .sk-circle-bounce .sk-circle-11 {\n          transform: rotate(300deg);\n        }\n        .sk-circle-bounce .sk-circle-12 {\n          transform: rotate(330deg);\n        }\n        .sk-circle-bounce .sk-circle-2:before {\n          animation-delay: -1.1s;\n        }\n        .sk-circle-bounce .sk-circle-3:before {\n          animation-delay: -1s;\n        }\n        .sk-circle-bounce .sk-circle-4:before {\n          animation-delay: -0.9s;\n        }\n        .sk-circle-bounce .sk-circle-5:before {\n          animation-delay: -0.8s;\n        }\n        .sk-circle-bounce .sk-circle-6:before {\n          animation-delay: -0.7s;\n        }\n        .sk-circle-bounce .sk-circle-7:before {\n          animation-delay: -0.6s;\n        }\n        .sk-circle-bounce .sk-circle-8:before {\n          animation-delay: -0.5s;\n        }\n        .sk-circle-bounce .sk-circle-9:before {\n          animation-delay: -0.4s;\n        }\n        .sk-circle-bounce .sk-circle-10:before {\n          animation-delay: -0.3s;\n        }\n        .sk-circle-bounce .sk-circle-11:before {\n          animation-delay: -0.2s;\n        }\n        .sk-circle-bounce .sk-circle-12:before {\n          animation-delay: -0.1s;\n        }\n        .sk-child:before {\n          content: "";\n          display: block;\n          margin: 0 auto;\n          width: 15%;\n          height: 15%;\n          background-color: #19b5fe;\n          border-radius: 100%;\n          animation: sk-circle-bounce-delay 1.2s infinite ease-in-out both;\n        }\n        @keyframes sk-circle-bounce-delay {\n          0%,\n          80%,\n          100% {\n            transform: scale(0);\n          }\n          40% {\n            transform: scale(1);\n          }\n        }\n      </style>\n      <div class="sk-circle-bounce">\n        <div class="sk-child sk-circle-1"></div>\n        <div class="sk-child sk-circle-2"></div>\n        <div class="sk-child sk-circle-3"></div>\n        <div class="sk-child sk-circle-4"></div>\n        <div class="sk-child sk-circle-5"></div>\n        <div class="sk-child sk-circle-6"></div>\n        <div class="sk-child sk-circle-7"></div>\n        <div class="sk-child sk-circle-8"></div>\n        <div class="sk-child sk-circle-9"></div>\n        <div class="sk-child sk-circle-10"></div>\n        <div class="sk-child sk-circle-11"></div>\n        <div class="sk-child sk-circle-12"></div>\n      </div>',c,s)})();